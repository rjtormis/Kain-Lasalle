<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <!-- site metas -->
    <title>Kain LaSalle</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css" />
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css" />
    <!-- Tweaks for older IEs-->
    <link
      rel="stylesheet"
      href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"
    />
    <!-- fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap"
      rel="stylesheet"
    />
    <!-- owl stylesheets -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- header section start -->
    <div class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <a class="logo" href="index.html"
            ><img src="images/logo.png" width="250px" height="200px"
          /></a>

          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="shops.html">Shops</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="about.html">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="contact.html">Contact</a>
              </li>
            </ul>

            <form class="form-inline my-2 my-lg-0">
              <div class="login_menu">
                <ul>
                  <li>
                    <a href="login.html"><img src="images/user-icon.png" /></a>
                  </li>
                  <li>
                    <a href="cart.html"><img src="images/trolly-icon.png" /></a>
                  </li>
                  <li>
                    <a href="#"><img src="images/search-icon.png" /></a>
                  </li>
                </ul>
              </div>
            </form>
          </div>
        </nav>
      </div>
    </div>
    <div class="container container-center">
      <!-- Choose Food Store Dropdown -->
      <div class="form-group">
        <label for="food_store">Choose Food Store:</label>
        <select id="food_store" class="form-control">
          <option value="Kulpy Chicken">Kulpy Chicken</option>
          <option value="Chowking">Chowking</option>
          <option value="Jollibee">Jollibee</option>
          <option value="Andoks">Andoks</option>
          <option value="Bok Chicken">Bok Chicken</option>
          <option value="KFC">KFC</option>
          <option value="Lains">Lains</option>
          <option value="Mang Inasal">Mang Inasal</option>
          <!-- Add more food store options as needed -->
        </select>
      </div>

      <!-- Choose Food Dropdown -->
      <div class="form-group">
        <label for="food">Choose Food:</label>
        <select id="food" class="form-control">
          <option value="food1">Food 1</option>
          <option value="food2">Food 2</option>
          <option value="food3">Food 3</option>
          <!-- Add more food options as needed -->
        </select>
      </div>

      <!-- Quantity Input for Each Food -->
      <div class="form-group">
        <label for="quantity_food1">Quantity of Food 1:</label>
        <input type="number" id="quantity_food1" class="form-control" min="1" value="1" />
      </div>

      <div class="form-group">
        <label for="quantity_food2">Quantity of Food 2:</label>
        <input type="number" id="quantity_food2" class="form-control" min="1" value="1" />
      </div>

      <div class="form-group">
        <label for="quantity_food3">Quantity of Food 3:</label>
        <input type="number" id="quantity_food3" class="form-control" min="1" value="1" />
      </div>

      <!-- Check Out Button -->
      <button type="button" class="btn btn-primary" id="checkOutButton">Check Out</button>

      <div id="orderDetails" style="display: none;">
        <!-- Order details will be shown here -->
      </div>

      <!-- Buy Button (Hidden by default) -->
      <button type="button" class="btn btn-success" id="buyButton" style="display: none;">Buy</button>
    </div>

    <script>
  document.addEventListener("DOMContentLoaded", () => {
    const checkOutButton = document.getElementById("checkOutButton");
    const buyButton = document.getElementById("buyButton");
    const orderDetailsDiv = document.getElementById("orderDetails");

    checkOutButton.addEventListener("click", () => {
      const foodStore = document.getElementById("food_store").value;
      const food = document.getElementById("food").value;
      const quantityFood1 = document.getElementById("quantity_food1").value;
      const quantityFood2 = document.getElementById("quantity_food2").value;
      const quantityFood3 = document.getElementById("quantity_food3").value;

      // Create the order details string
      const orderDetails = `
        <h2>Order Details</h2>
        <p>Food Store: ${foodStore}</p>
        <p>Food: ${food}</p>
        <p>Quantity of Food 1: ${quantityFood1}</p>
        <p>Quantity of Food 2: ${quantityFood2}</p>
        <p>Quantity of Food 3: ${quantityFood3}</p>
      `;

      // Display the order details
      orderDetailsDiv.innerHTML = orderDetails;
      orderDetailsDiv.style.display = "block";

      // Show the Buy button
      buyButton.style.display = "block";

      // Hide the Check Out button
      checkOutButton.style.display = "none";
    });

    buyButton.addEventListener("click", () => {
      const foodStore = document.getElementById("food_store").value;
      const food = document.getElementById("food").value;
      const quantityFood1 = document.getElementById("quantity_food1").value;
      const quantityFood2 = document.getElementById("quantity_food2").value;
      const quantityFood3 = document.getElementById("quantity_food3").value;

      const orderData = {
        foodStore,
        food,
        quantity: {
          food1: quantityFood1,
          food2: quantityFood2,
          food3: quantityFood3,
        },
      };

      // Send the order data to the server for storing in MongoDB
      fetch("/order", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(orderData),
      })
        .then((response) => response.json())
        .then((data) => {
          // Show an alert box with a success message
          if (data.success) {
            alert("Purchase Successful!");
          } else {
            alert("Purchase Failed!");
          }
          // Reload the page after showing the alert
          location.reload();
        })
        .catch((error) => {
          console.error("Error sending order data to the server:", error);
        });
    });
  });
</script>
  </body>
</html>
