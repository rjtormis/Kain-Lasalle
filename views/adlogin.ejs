<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kain LaSalle - Admin Login</title>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <link rel="stylesheet" href="css/responsive.css" />
  <link rel="icon" href="images/fevicon.png" type="image/gif" />
  <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css" />
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" rel="stylesheet" />
</head>
<body>
  <div class="header_section">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="logo" href="homepage.html"><img src="images/logo.png" width="250px" height="200px" /></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="homepage.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="shops.html">Shops</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <div class="login_menu">
              <ul>
                <li><a href="login.html"><img src="images/user-icon.png" /></a></li>
                <li><a href="cart.html"><img src="images/trolley-icon.png" /></a></li>
                <li><a href="#"><img src="images/search-icon.png" /></a></li>
              </ul>
            </div>
          </form>
        </div>
      </nav>
    </div>
  </div>

  <center>
    <div class="login">
      <form id="adminLoginForm">
        <h1>Admin Login</h1>
        <div class="input-box">
          <input type="text" id="usernameInput" placeholder="Username" required>
        </div>

        <div class="input-box">
          <input type="password" id="passwordInput" placeholder="Password" required>
        </div>

        <button type="button" id="login" class="btnLogin">Login</button>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha256.js"></script>
        <script type="text/javascript">
          document.getElementById("login").onclick = function () {
            const username = document.getElementById("usernameInput").value;
            const password = document.getElementById("passwordInput").value;
      
            fetch('http://localhost:3000/adlogin', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ username, password }),
            })
              .then(response => {
                if (!response.ok) {
                  throw new Error(response.statusText);
                }
                return response.json();
              })
              .then(data => {
                if (data.success) {
                  // Display "Logging in..." alert immediately
                  alert('Logging in...');
      
                  // Redirect after 0.5 seconds
                  setTimeout(function () {
                    window.location.href = "admin.html";
                  }, 50);
                } else {
                  alert('Invalid credentials');
                }
              })
              .catch(error => {
                console.error('Login failed:', error);
                alert('Error during login');
              });
          };
          </script>
      </form>
    </div>
  </center>
</body>
</html>
